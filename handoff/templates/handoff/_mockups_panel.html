{% load handoff_extras %}
<div id="mockups-panel">
  <h5 class="card-title">Mockups</h5>
  <div class="text-muted small mb-2">
    Click a mockup image to download it.
  </div>
  <div class="mb-3">
    <a
      class="btn btn-primary btn-sm me-2"
      href="{% url 'handoff:download_mockups' task.id %}"
    >
      Download ZIP
    </a>
    {% if mockups_folder_id %}
      <a
        class="btn btn-outline-secondary btn-sm"
        href="https://drive.google.com/drive/folders/{{ mockups_folder_id }}"
        target="_blank"
        rel="noopener"
      >
        Open Mockups Folder
      </a>
    {% endif %}
  </div>
  <div class="row g-2">
    {% for slot in task.mockup_slots.all %}
      <div class="col-6 col-md-4 col-lg-3">
        {% with fallback_image_id=slot_images|get_item:slot.order %}
          {% if slot.drive_file_id or fallback_image_id or required_orders|get_item:slot.order %}
            {% include "handoff/_mockup_slot.html" with slot=slot fallback_image_id=fallback_image_id required_orders=required_orders %}
          {% endif %}
        {% endwith %}
      </div>
    {% endfor %}
  </div>
</div>
