{% load i18n %}

{% if app_list %}
  <div class="app-list">
    {% for app in app_list %}
      <details class="{% if app.app_label == "handoff" %}app-handoff{% else %}app-default{% endif %} app-fold">
        <summary class="app-title">{{ app.name }}</summary>

      {% if app.app_label == "handoff" %}
        <div class="app-fold-content">
          <details class="handoff-group handoff-fold">
            <summary class="handoff-group-title">Workflow</summary>
            <ul class="handoff-list">
              {% for model in app.models %}
                {% if model.object_name|lower in "task,recurringtask,taskstep" %}
                  <li class="handoff-item">
                    <a href="{{ model.admin_url }}">{{ model.name }}</a>
                    {% if model.add_url %}<a class="addlink" href="{{ model.add_url }}">Add</a>{% endif %}
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
          </details>

          <details class="handoff-group handoff-fold">
            <summary class="handoff-group-title">Templates</summary>
            <ul class="handoff-list">
              {% for model in app.models %}
                {% if model.object_name|lower in "tasktemplate,mockuptemplate" %}
                  <li class="handoff-item">
                    <a href="{{ model.admin_url }}">{{ model.name }}</a>
                    {% if model.add_url %}<a class="addlink" href="{{ model.add_url }}">Add</a>{% endif %}
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
          </details>

          <details class="handoff-group handoff-fold">
            <summary class="handoff-group-title">Files</summary>
            <ul class="handoff-list">
              {% for model in app.models %}
                {% if model.object_name|lower in "attachment" %}
                  <li class="handoff-item">
                    <a href="{{ model.admin_url }}">{{ model.name }}</a>
                    {% if model.add_url %}<a class="addlink" href="{{ model.add_url }}">Add</a>{% endif %}
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
          </details>

          <details class="handoff-group handoff-fold">
            <summary class="handoff-group-title">System</summary>
            <ul class="handoff-list">
              <li class="handoff-item">
                <a href="/admin/handoff/schedule/">Design Schedule</a>
              </li>
              <li class="handoff-item">
                <a href="/admin/handoff/notes/">Admin Notes</a>
              </li>
              <li class="handoff-item">
                <a href="/admin/handoff/deploy/">Deploy Latest</a>
              </li>
              {% for model in app.models %}
                {% if model.object_name|lower in "appsettings,store,storemembership" %}
                  <li class="handoff-item">
                    <a href="{{ model.admin_url }}">{{ model.name }}</a>
                    {% if model.add_url %}<a class="addlink" href="{{ model.add_url }}">Add</a>{% endif %}
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
          </details>
        </div>
      {% else %}
        <ul class="handoff-list">
          {% for model in app.models %}
            <li class="handoff-item">
              <a href="{{ model.admin_url }}">{{ model.name }}</a>
              {% if model.add_url %}<a class="addlink" href="{{ model.add_url }}">Add</a>{% endif %}
            </li>
          {% endfor %}
        </ul>
      {% endif %}
      </details>
    {% endfor %}
  </div>
{% else %}
  <p>{% translate "You donâ€™t have permission to view or edit anything." %}</p>
{% endif %}
